<!DOCTYPE html>
<html>
<head>
    <title>Обратный отсчет</title>
    <style>
        body {
            background-color: #333333;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #555555;
        }

        .progress {
            width: 100%;
            height: 100%;
            background-color: #ff0000;
            transition: width 1s;
        }
    </style>
    <script>
        // Установить расписание пар
        const schedule = {
            "понедельник": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "вторник": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "среда": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "четверг": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "пятница": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "суббота": [
                { start: "08:45", end: "10:00" },
                { start: "10:10", end: "11:25" },
                { start: "11:35", end: "12:50" },
                { start: "13:00", end: "14:15" }
            ]
        };

        // Функция для обновления таймера и полосы загрузки каждую секунду
        function updateTimer() {
            const currentDate = new Date();
            const currentDay = currentDate.toLocaleString('ru-RU', { weekday: 'long' }).toLowerCase();
            const currentTime = currentDate.getHours() * 60 + currentDate.getMinutes();

            const progressBar = document.getElementById("progress-bar");
            const progress = document.getElementById("progress");

            let remainingTime = "";

            if (currentDay === "воскресенье") {
                remainingTime = "чиллим, флексим, отдыхаем";
                progress.style.width = "0%";
            } else {
                let nextDay = currentDay;
                let i = 0;
                while (remainingTime === "") {
                    nextDay = getNextDay(nextDay);
                    if (schedule.hasOwnProperty(nextDay)) {
                        const nextSchedule = schedule[nextDay];
                        if (nextSchedule[i % nextSchedule.length]) {
                            const start = getTimeValue(nextSchedule[i % nextSchedule.length].start);
                            const end = getTimeValue(nextSchedule[i % nextSchedule.length].end);
                            const progressBarWidth = ((currentTime - start) / (end - start)) * 100;
                            if (progressBarWidth >= 0 && progressBarWidth <= 100) {
                                progress.style.width = progressBarWidth + "%";
				    remainingTime = `${Math.floor((end - currentTime) / 60)} часов, ${(end - currentTime) % 60} минут`;
                            }
                        }
                    }
                    i++;
                }
                if (remainingTime === "") {
                    remainingTime = "Чиллим, флексим, отдыхаем";
                    progress.style.width = "0%";
                }
            }

            document.getElementById("timer").innerHTML = `Обратный отсчет до начала следующей пары: ${remainingTime}`;
        }

        function getTimeValue(time) {
            const timeArray = time.split(":");
            const hours = parseInt(timeArray[0]);
            const minutes = parseInt(timeArray[1]);
            return hours * 60 + minutes;
        }

        function getNextDay(day) {
            const daysOfWeek = ["понедельник", "вторник", "среда", "четверг", "пятница", "суббота", "воскресенье"];
            const index = daysOfWeek.indexOf(day);
            if (index === daysOfWeek.length - 1) {
                return daysOfWeek[0];
            } else {
                return daysOfWeek[index + 1];
            }
        }

        setInterval(updateTimer, 1000);
    </script>
</head>
<body>
    <div class="progress-bar">
        <div id="progress" class="progress"></div>
    </div>

    <h1 style="text-align:center;">Обратный отсчет до пары</h1>
    <div style="text-align:center;">
        <p id="timer" style="font-size:24px;"></p>
    </div>
</body>
</html>
