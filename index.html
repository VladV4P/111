<!DOCTYPE html>
<html>
<head>
    <title>Обратный отсчет</title>
    <style>
        body {
            background-color: #333333;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #555555;
        }

        .progress {
            width: 100%;
            height: 100%;
            background-color: #ff0000;
            transition: width 1s;
        }
    </style>
    <script>
        // Установить расписание пар
        const schedule = {
            "понедельник": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "вторник": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "среда": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "четверг": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "пятница": [
                { start: "08:45", end: "10:05" },
                { start: "10:25", end: "11:45" },
                { start: "12:05", end: "13:25" },
                { start: "13:35", end: "14:55" }
            ],
            "суббота": [
                { start: "08:45", end: "10:00" },
                { start: "10:10", end: "11:25" },
                { start: "11:35", end: "12:50" },
                { start: "13:00", end: "14:15" }
            ]
        };

        // Функция для обновления таймера и полосы загрузки каждую секунду
        function updateTimer() {
            const currentDate = new Date(); // Текущая дата и время
            const currentTime = currentDate.getHours() * 60 + currentDate.getMinutes(); // Текущее время в формате ЧЧММ

            const progressBar = document.getElementById("progress-bar");
            const progress = document.getElementById("progress");

            const currentDay = currentDate.toLocaleString('ru-RU', { weekday: 'long' }).toLowerCase(); // Текущий день недели

            let remainingTime = ""; // Переменная для хранения оставшегося времени до начала следующей пары

            if (schedule.hasOwnProperty(currentDay)) {
                const currentSchedule = schedule[currentDay];
                const nextPairIndex = currentSchedule.findIndex(pair => getTimeValue(pair.start) > currentTime);
                if (nextPairIndex !== -1) {
                    const nextPair = currentSchedule[nextPairIndex];
                    const start = getTimeValue(nextPair.start);
                    const end = getTimeValue(nextPair.end);
                    progress.style.width = `${((currentTime - start) / (end - start)) * 100}%`;
                    remainingTime = `${Math.floor((end - currentTime) / 60)} часов, ${(end - currentTime) % 60} минут`;
                } else {
                    progress.style.width = "0%";
                    remainingTime = "чиллим флексим отдыхаем";
			}
            } else {
                progress.style.width = "0%";
                remainingTime = "Приятного отдыха!";
            }

            // Отобразить оставшееся время или сообщение на странице
            document.getElementById("timer").innerHTML = `Обратный отсчет до начала следующей пары: ${remainingTime}`;
        }

        function getTimeValue(time) {
            const timeArray = time.split(":");
            const hours = parseInt(timeArray[0]);
            const minutes = parseInt(timeArray[1]);
            return hours * 60 + minutes;
        }

        setInterval(updateTimer, 1000);
    </script>
</head>
<body>
    <div class="progress-bar">
        <div id="progress" class="progress"></div>
    </div>

    <h1 style="text-align:center;">Обратный отсчет до пары</h1>
    <div style="text-align:center;">
        <p id="timer" style="font-size:24px;"></p>
    </div>
</body>
</html>
